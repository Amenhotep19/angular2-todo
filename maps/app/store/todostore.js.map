{"version":3,"sources":["app/store/todostore.ts"],"names":["TodoItem","TodoItem.constructor","TodoItem.uuid","TodoItem.text","TodoItem.setText","TodoItem.completed","TodoItem.setCompleted","TodoStore","TodoStore.constructor","TodoStore.addItem","TodoStore.updateText","TodoStore.updatedCompletion","TodoStore.removeItem","TodoStore.persistChanges"],"mappings":"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","file":"app/store/todostore.js","sourcesContent":["/// <reference path=\"../../../typings/node-uuid/node-uuid-global.d.ts\" />\r\nimport { List, Map } from 'immutable';\r\n\r\nexport class TodoItem {\r\n  _data: Map<string, any>;\r\n\r\n  get uuid() {\r\n    return <string> this._data.get('uuid');\r\n  }\r\n\r\n  get text() {\r\n    return <string> this._data.get('text');\r\n  }\r\n\r\n  setText(value: string) {\r\n    return new TodoItem(this._data.set('text', value));\r\n  }\r\n\r\n  get completed() {\r\n    return <boolean> this._data.get('completed');\r\n  }\r\n\r\n  setCompleted(value: boolean) {\r\n    return new TodoItem(this._data.set('completed', value));\r\n  }\r\n\r\n  constructor(data: any = undefined) {\r\n    data = data || { text: '', completed: false, uuid: uuid.v4() };\r\n    this._data = Map<string, any>(data);\r\n  }\r\n}\r\n\r\nexport class TodoStore {\r\n  items = List<TodoItem>();\r\n\r\n  constructor() {\r\n    const storedItemsString = <string> localStorage.getItem('todolist') || '[]';\r\n    const storedItems = <Array<any>> JSON.parse(storedItemsString);\r\n    this.items = List<TodoItem>(storedItems.map(i => new TodoItem(i._data)));\r\n  }\r\n\r\n  addItem(newItem: string) {\r\n    const item = new TodoItem().setText(newItem);\r\n    this.items = this.items.push(item);\r\n    this.persistChanges();\r\n  }\r\n\r\n  updateText(itemId: string, updatedText: string) {\r\n    const index = this.items.findIndex((i: TodoItem) => i.uuid === itemId);\r\n    const item = this.items.get(index);\r\n    const newItem = item.setText(updatedText);\r\n    this.items = this.items.set(index, newItem);\r\n    this.persistChanges();\r\n  }\r\n\r\n  updatedCompletion(itemId: string, completed: boolean) {\r\n    const index = this.items.findIndex((i: TodoItem) => i.uuid === itemId);\r\n    const item = this.items.get(index);\r\n    const newItem = item.setCompleted(completed);\r\n    this.items = this.items.set(index, newItem);\r\n    this.persistChanges();\r\n  }\r\n\r\n  removeItem(itemId: string) {\r\n    this.items = List<TodoItem>(this.items.filter((i: TodoItem) => i.uuid !== itemId));\r\n    this.persistChanges();\r\n  }\r\n\r\n  persistChanges() {\r\n    localStorage.setItem('todolist', JSON.stringify(this.items.toJS()));\r\n  }\r\n}\r\n"],"sourceRoot":"/source/"}